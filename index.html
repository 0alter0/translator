<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Translator</title>
    <style>
        body {font-family: Arial, sans-serif;background: #f0f2f5;display: flex;flex-direction: column;align-items: center;justify-content: center;height: 100vh;margin: 0;}
        h1 {color: #333;margin-bottom: 20px;}
        textarea {width: 80%;max-width: 600px;padding: 10px;border-radius: 8px;border: 1px solid #ccc;font-size: 16px;margin-bottom: 20px;resize: none;}
        input {width: 100px;padding: 5px;margin: 5px;}
        button {background: #4CAF50;color: white;border: none;padding: 10px 20px;border-radius: 8px;cursor: pointer;font-size: 16px;transition: background 0.3s;margin: 5px;}
        button:hover {background: #45a049;}
        h3 {margin-top: 20px;color: #333;}
        pre {background: #fff;border: 1px solid #ccc;border-radius: 8px;padding: 15px;width: 80%;max-width: 600px;min-height: 100px;white-space: pre-wrap;word-wrap: break-word;}
        .progress-container {width: 80%;max-width: 600px;background: #ddd;border-radius: 8px;overflow: hidden;margin: 10px 0;}
        .progress-bar {height: 20px;width: 0;background: #4CAF50;text-align: center;color: white;line-height: 20px;border-radius: 8px 0 0 8px;}
        #copyButton {background: #2196F3;}
        #copyButton:hover {background: #0b7dda;}
    </style>
</head>
<body>
<h1>Translator</h1>
<textarea id="inputText" placeholder="Enter text here" rows="5"></textarea><br>
Seed: <input type="number" id="seedInput" value="0" title="0 for random"><br>
<button onclick="translate100Times(false, true)">Legacy Mode (Full)</button>
<button onclick="translate100Times(true, true)">Legacy Mode (Speed)</button>
<button onclick="translate100Times(false, false)">New Mode (Full)</button>
<button onclick="translate100Times(true, false)">New Mode (Speed)</button>
<div class="progress-container">
    <div class="progress-bar" id="progressBar">0%</div>
</div>
<h3>Output:</h3>
<pre id="outputText"></pre>
<button id="copyButton" onclick="copyOutput()">Copy Output</button>
<script>
const fullLanguages = ["af","sq","am","ar","hy","az","eu","be","bn","bs","bg","ca","ceb","ny","zh-CN","zh-TW","co","hr","cs","da","nl","en","eo","et","tl","fi","fr","fy","gl","ka","de","el","gu","ht","ha","haw","iw","hi","hmn","hu","is","ig","id","ga","it","ja","jw","kn","kk","km","rw","ko","ku","ky","lo","la","lv","lt","lb","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","or","ps","fa","pl","pt","pa","ro","ru","sm","gd","sr","st","sn","sd","si","sk","sl","so","es","su","sw","sv","tg","ta","tt","te","th","tr","tk","uk","ur","ug","uz","vi","cy","xh","yi","yo","zu"];
const speedLanguages = ["es","fr","de","it","pt","ja","ko","zh-CN","ru","ar","hi","id","tr","nl","sv"];

function mulberry32(seed) { //seeds!!!!!!
    return function() {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
    }
}

function getRandomIndex(arr, seed, i) {
    if (seed === 0) return Math.floor(Math.random() * arr.length);
    const rng = mulberry32(seed + i)();
    return Math.floor(rng * arr.length);
}

async function translate100Times(speedMode, legacy) {
    const inputText = document.getElementById("inputText").value;
    const outputText = document.getElementById("outputText");
    const progressBar = document.getElementById("progressBar");
    const seed = parseInt(document.getElementById("seedInput").value);

    if (!inputText) { outputText.textContent = "text goes here"; return; }

    let text = inputText;
    const languages = speedMode ? speedLanguages : fullLanguages;

    try {
        if (legacy) {
            for (let i = 0; i < 100; i++) {
                const idx = getRandomIndex(languages, seed, i);
                const lang = languages[idx];

                let res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${lang}&dt=t&q=${encodeURIComponent(text)}`);
                let data = await res.json();
                text = data[0].map(item => item[0]).join("");

                res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${lang}&tl=en&dt=t&q=${encodeURIComponent(text)}`);
                data = await res.json();
                text = data[0].map(item => item[0]).join("");

                const progress = Math.round(((i+1)/100)*100);
                progressBar.style.width = progress + "%";
                progressBar.textContent = progress + "%";
            }
        } else {
            for (let i = 0; i < 100; i++) {
                const idx = getRandomIndex(languages, seed, i);
                const lang = languages[idx];

                let res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${lang}&dt=t&q=${encodeURIComponent(text)}`);
                let data = await res.json();
                text = data[0].map(item => item[0]).join("");

                const progress = Math.round(((i+1)/100)*100);
                progressBar.style.width = progress + "%";
                progressBar.textContent = progress + "%";
            }
            let res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(text)}`);
            let data = await res.json();
            text = data[0].map(item => item[0]).join("");
        }
        outputText.textContent = text;
    } catch (e) {
        outputText.textContent = "Error during translation: " + e.message;
    }
}

function copyOutput() {
    const outputText = document.getElementById("outputText").textContent;
    if (!outputText) return;

    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(outputText).then(() => {
            showCopyFeedback();
        }).catch(() => {
            fallbackCopy(outputText);
        });
    } else {
        fallbackCopy(outputText);
    }
}

function fallbackCopy(text) {
    const temp = document.createElement("textarea");
    temp.value = text;
    document.body.appendChild(temp);
    temp.select();
    try {
        document.execCommand("copy");
        showCopyFeedback();
    } catch (err) {
        alert("Copy failed, please copy manually.");
    }
    document.body.removeChild(temp);
}

function showCopyFeedback() {
    const copyBtn = document.getElementById("copyButton");
    copyBtn.textContent = "Copied!";
    setTimeout(() => copyBtn.textContent = "Copy Output", 1500);
}
</script>
</body>
</html>
